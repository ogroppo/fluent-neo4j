import test from 'ava';
import CypherQuery from '../index';

test('Merge invalid node throws error', t => {
	var query = new CypherQuery;
	t.throws(()=>{
		query.mergeNode(['invalid'])
	});
	t.throws(()=>{
		query.mergeNode(null)
	});
});

test('Merge empty node and current alias', t => {
	var query = new CypherQuery;
	query.mergeNode();
	query.mergeNode();
	t.is(query.queryString, 'MERGE (node) MERGE (node1) ');
});

test('Merge node with alias, label, labels, properties, reserved field, set options, remove options', t => {
	var query = new CypherQuery;
	query.mergeNode(
		{alias: 'box', label: 'Box', labels: ['hey', 'you too'], type: 'content', createdBy: 123, createdAt: 123123123},
		{setProps: {cane: 'morto'}, removeProps: ['ladro'], setLabels: ['Bimbo'], removeLabels: ['GG', 'SS']}
	);
	t.is(query.queryString, 'MERGE (box:`hey`:`you too`:`Box` {type:{type0}, createdBy:{createdBy1}, createdAt:{createdAt2}}) REMOVE box.ladro, box:`GG`:`SS` SET box.cane = "morto", box:`Bimbo`, box.updatedAt = timestamp() ');
});